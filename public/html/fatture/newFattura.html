<div id="wrapper" ng-controller="NuovaFatturaController">   
        <div class="row">
                    <div class="col-lg-6">
                        <h3 class="page-header">Crea {{temp.descTipofattura}}</h3>
                    </div>
                   <!-- riga con bottoniera -->
                    <div class="col-lg-6 text-right">
                        <button class="btn btn-primary btn-md" ng-click="gotoElencoFatture()"> <i class="fa fa-home"></i>
                            Torna ai documenti
                        </button>
                    </div>
        </div>
        
        <!--markup-->
     
        <!--body pagina -->
            <div class="row">  
                 <div class="col-md-12">              
                    <md-steppers class="stepper-custom-latr" md-selected="temp.steppers.selected" md-stretch-steppers="always" style="min-height: 70% !important;">
                        <md-step label="Dati Cliente" md-complete="temp.steppers.step0.completed"  ng-disabled="temp.steppers.step0.disabled">
                            <md-content style="background-color: transparent!important;overflow: hidden;">  
                                <div class="row">
                                            <div class="col-md-11 col-sm-12">
                                                    <div class="portlet blue-hoki box">
                                                        <div class="portlet-title">
                                                            <div class="caption">
                                                                <i class="fa fa-user" style="font-size:17px"></i> 
                                                                
                                                                        Dati Cliente
                                                                
                                                            </div>
                                                        </div>
                                                      
                                                    </div>
                                            </div>
                                            <div class="form-group col-sm-12 col-md-9 col-md-offset-0">
                                                    <p>Ricerca Cliente:</p>   
                                                                                                            
                                                        <input type="text" name="f1-first-ricerca" 
                                                        placeholder="Ricerca per nome, ragione sociale, partiva iva o codice fiscale" 
                                                        id="campo-di-ricerca-cliente"
                                                        autofocus="!transient.nuovaFattura.header.nome"
                                                        ng-model="temp.campoDiRicercaCliente"
                                                        class="f1-first-nome form-control" 
                                                        uib-typeahead="client as client.DESCRIZIONE for client in clientTypeaheadList  | filter:{DESCRIZIONE:$viewValue}" 
                                                        typeahead-on-select="onSelectClient($item, $model, $label)"
                                                        typeahead-no-results="noResults"
                                                        typeahead-min-length="3"> 
                                                        <!--
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-search" ng-click=""></span>
                                                        </span>
                                                        -->
                                                        <div ng-if="noResults" uib-dropdown uib-dropdown-toggle auto-close="disabled" is-open="true">
                                                            <ul class="dropdown-menu"  role="menu">
                                                            <li><a ng-click="openModalNewCliente()"><i class="fa fa-user fa-fw"></i>nessun cliente trovato clicca per aggiungerlo</a></li>
                                                            </ul>
                                                        </div>
                                            </div>                       
                                            
                                            <div class="form-group col-sm-12 col-md-2 col-md-offset-0">
                                                <p>Data Emissione:</p>
                                                <div class="input-group" locale="it" moment-picker="transient.nuovaFattura.core.dataEmissione" format="DD/MM/YYYY" min-date="minDate" max-date="maxDate" start-view="month">                                      
                                                    <input type="text" name="nf-dataEmissione" 
                                                    placeholder="" id="nf-id-dataEmissione"
                                                    readonly="" 
                                                    ng-model="transient.nuovaFattura.core.dataEmissione"
                                                    class="form-control" >
                                                    <span class="input-group-addon">
                                                        <i class="glyphicon glyphicon-calendar"></i>
                                                    </span>
                                                </div>
                                            </div>
                                </div>                                        
                                <hr>                                        
                                <div class="row">
                                    <div class="form-group col-sm-12 col-md-offset-0" ng-class="colTypeDoc">
                                            <p>Nome/Ragione Sociale*:</p>                                                                                                         
                                            <input type="text" name="nf-nome" 
                                            required placeholder="" 
                                            id="nf-id-nome"
                                            disabled
                                            ng-model="transient.nuovaFattura.header.nome"
                                            class="form-control">                                                                                                                                   
                                    </div>                                   
                                    <div class="form-group col-sm-12 col-md-2 col-md-offset-0">
                                        <p>Codice Fiscale:</p>                                        
                                        <input type="text" name="nf-codiceFiscale" 
                                        placeholder="" id="nf-id-codiceFiscale"
                                        disabled
                                        ng-model="transient.nuovaFattura.header.codicefiscale"
                                        class="form-control" >
                                    </div>

                                    <div class="form-group col-sm-12 col-md-2 col-md-offset-0">
                                        <p>Partita IVA:</p>                                        
                                        <input type="text" name="nf-partitaIva" 
                                        required placeholder="" id="nf-id-partitaIva"
                                        disabled
                                        ng-model="transient.nuovaFattura.header.partitaiva"
                                        class="form-control" >
                                    </div>

                                    <div ng-if="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="form-group col-sm-12 col-md-2 col-md-offset-0">
                                        <p>Conto:</p>
                                        <select ng-change="reloadModPag()" required name="iva-articolo-$index" 
                                        ng-model="transient.nuovaFattura.core.idConto" class="form-control input-sm">
                                        <option value="-1">{{labels.select_empty_value}}</option>
                                        <option ng-repeat="contoItem in persistent.elencoConti" value="{{contoItem.ID}}">{{contoItem.IBAN.substring(contoItem.IBAN.length-12, contoItem.IBAN.length)}} - {{contoItem.BANCA}} </option>
                                        </select>
                                    
                                        </div>   

                                </div>
                                <div class="row">
                                    <div class="form-group col-sm-12 col-md-offset-0" ng-class="colTypeDoc">
                                            <p>Indirizzo:</p>                                                                                                           
                                            <input type="text" name="nf-indirizzo" 
                                            required placeholder="" 
                                            id="nf-id-indirizzo"
                                            disabled
                                            ng-model="transient.nuovaFattura.header.indirizzoCliente"
                                            class="form-control" >                                                                                                                                  
                                    </div>       
                                    
                                    <div ng-if="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="form-group col-sm-12 col-md-4 col-md-offset-0" ng-class="{'has-error':transient.nuovaFattura.core.modalitaPagamento==-1 && checkDatiCompleti===false}">
                                        <p>Modalita pagamento*:</p>
                                        <select required name="iva-articolo-$index" 
                                        ng-model="transient.nuovaFattura.core.modalitaPagamento" 
                                        ng-value="transient.nuovaFattura.core.modalitaPagamento" class="form-control input-sm">
                                        <option value="-1">{{labels.select_empty_value}}</option>
                                        <option ng-repeat="pagItem in listaPagamentoFatture" value="{{pagItem.ID}}">{{pagItem.DESCRIZIONE}}</option>
                                        </select>

                                    </div>

                                    <!-- Se è un DDT mostro anche telefono e fax per riempire la pagina poichè non mostro il conto e la modalità di pagamento-->
                                    <div ng-if="transient.nuovaFattura.core.tipoFattura==='DDT' || transient.nuovaFattura.core.tipoFattura=='PROF'" class="form-group col-sm-12 col-md-2 col-md-offset-0">
                                        <p>Telefono:</p>                                        
                                        <input type="text" name="nf-telefono" 
                                        placeholder="" id="nf-id-telefono"
                                        disabled
                                        ng-model="transient.nuovaFattura.header.telCliente"
                                        class="form-control" >
                                    </div>

                                    <div ng-if="transient.nuovaFattura.core.tipoFattura==='DDT' || transient.nuovaFattura.core.tipoFattura=='PROF'" class="form-group col-sm-12 col-md-2 col-md-offset-0">
                                        <p>Fax:</p>                                                                                                         
                                        <input type="text" name="nf-fax" 
                                        required placeholder="" 
                                        id="nf-id-fax"
                                        disabled
                                        ng-model="transient.nuovaFattura.header.faxCliente"
                                        class="form-control">        
                                                                                                                                                                
                                    </div>



                                </div>
                                <div class="row col-sm-3 text-left">
                                    <button class="btn blue btn-outline btn-md" ng-click="resetCliente()"> <i class="fa fa-sticky-note-o"></i> RESET CAMPI</button>                                    
                                </div>
                                <div class="col-sm-12 col-md-3 col-md-offset-5 text-right">
                                    <button class="btn btn-primary btn-md" ng-click="nextStep0CheckCliente()"> <i class="fa fa-chevron-right"></i> AVANTI</button>
                                </div>                                
                            </md-content>    
                        </md-step>
                        <md-step label="Dettaglio Articoli" md-complete="temp.steppers.step1.completed" ng-disabled="temp.steppers.step1.disabled">
                            <md-content style="background-color: transparent!important;overflow: hidden;">     
                                <div class="row">
                                    <div class="col-md-11 col-sm-11">
                                            <div class="portlet grey-cascade box">
                                                <div class="portlet-title">
                                                    <div class="caption">
                                                        <i class="fa fa-fire-extinguisher" style="font-size:19px"></i>Dettaglio articoli 
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                </div>    
                                <div class="col-md-11  input-group"  ng-if="transient.nuovaFattura.core.idCliente">                                                             
                                                <input type="text"  name="f1-first-ricerca" 
                                                placeholder="Aggiungi un codice prodotto, oppure effettua la ricerca avanzata" 
                                                id="campo-di-ricerca-articolo" 
                                                ng-model="temp.campoDiRicercaArticolo"
                                                class="f1-first-nome form-control find-class-contr" ng-keydown="addArt($event)"> 
                                                
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-font" ng-click="aggiungiArticoloManuale()" title="Articolo Manuale"></span>                                                    
                                                </span>
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-plus-sign" ng-click="aggiungiArticolo()" title="Aggiungi Articolo"></span>                                                    
                                                </span>
                                                <span class="input-group-addon">                                                    
                                                    <span class="glyphicon glyphicon-search" ng-click="openModalRicercaArticolo()" title="Ricerca Avanzata"></span>
                                                </span>
                                            </input>

                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-8 input-group find-class-art ">
                                        <div class="panel panel-default" ng-show="transient.nuovaFattura.righe.length > 0">
                                            <div class="panel-heading">
                                                        Articoli in fattura
                                            </div>
                                            <!-- /.panel-heading -->
                                            <div class="panel-body" ng-show="transient.nuovaFattura.righe.length > 0">
                                            
                                                <table datatable="ng" 
                                                dt-options="dtOptionsListaArticoli" dt-column-defs="dtColumnDefsListaArticoli"
                                                dt-instance="dtInstanceListaArticoli"
                                                width="100%" class="table table-striped table-bordered table-hover dtResponsive" id="dataTables-listaArticoli">
                                                    <thead>
                                                        <tr>    
                                                            <th>Codice</th>                                                                    
                                                            <th>Descrizione</th>   
                                                            <th>Prezzo</th>
                                                            <th>Quantità</th>
                                                            <th>IVA</th>
                                                            <th>Sconto%</th> 
                                                            <th>Totale</th>
                                                            <th>Tot. IVA</th>
                                                            <th>Azioni</th>                     
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="odd gradeX" ng-repeat="articolo in transient.nuovaFattura.righe">
                                                            <td>{{articolo.codiceArticolo}}</td>
                                                            <td ng-if="articolo.codiceArticolo !== null">{{articolo.descrizione}}</td>
                                                            <td ng-if="articolo.codiceArticolo === null">
                                                                <textarea rows="2"  name="articolo-descrizione-$index"   
                                                                class="form-control input-sm"                                     
                                                                id="id-articolo-descrizione-$index" style="width:90%"
                                                                ng-model="transient.nuovaFattura.righe[$index].descrizione"
                                                                />
                                                            </td>                                                            
                                                            <td>
                                                                <input name="articolo-prezzoUnitario-$index" 
                                                                class="form-control input-sm"                                       
                                                                id="id-articolo-prezzoUnitario-$index" style="width:90%; height: 30px"
                                                                ng-model="transient.nuovaFattura.righe[$index].prezzoUnitario"
                                                                ng-change="calcolaTotaleRiga($index)"
                                                                awnum="importoPositivo" type="text"
                                                                >
                                                            </td>
                                                            <td>                                                                
                                                                <input class="form-control input-sm" style="width:95%;height: 30px" type="number" min="0" max="999999" blocco-max-value allow-only-numbers name="articolo-qty-$index"                                        
                                                                id="id-articolo-qty-$index" style="width:90%"
                                                                ng-model="transient.nuovaFattura.righe[$index].qty"
                                                                
                                                                ng-change="calcolaTotaleRiga($index)">
                                                            
                                                            </td>
                                                            <td>
                                                                    <select class="form-control input-sm" 
                                                                    ng-change="calcolaTotaleRiga($index)"
                                                                    required name="iva-articolo-$index" 
                                                                    ng-options="ivaItem.CODICE as ivaItem.DESCRIZIONE for ivaItem in listaIvaApplicata" 
                                                                    ng-model="transient.nuovaFattura.righe[$index].iva">                                                             
                                                                    <option value="">{{labels.select_empty_value}}</option>
                                                                </select>

                                                                
                                                            </td>
                                                            <td>
                                                                <input class="form-control input-sm" type="number" 
                                                                min="0" max="100" blocco-max-value
                                                                allow-only-numbers name="articolo-sconto-$index"                                        
                                                                id="id-articolo-sconto-$index" style="width:90%;height: 30px"
                                                                ng-model="transient.nuovaFattura.righe[$index].sconto"
                                                                ng-change="calcolaTotaleRiga($index)">
                                                            </td>
                                                                                                                                
                                                            <td>{{articolo.totaleRiga  | currency: "€" : 2}}</td>
                                                            <td>{{articolo.totaleRigaIvato  | currency: "€" : 2}}</td>
                                                            <td class="text-center">
                                                            <i class="glyphicon glyphicon-trash" ng-click="eliminaArticoloDaFattura($index)"></i>
                                                                
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <!-- /.table-responsive -->
                                            
                                            </div>
                                            <!-- /.panel-body -->
                                        </div>
                                        <!-- /.panel -->
                                    </div>
                                </div>
                                <div class="row">
                                    <div ng-show="transient.nuovaFattura.righe.length > 0 && transient.nuovaFattura.core.tipoFattura!=='DDT'"> 
                                        <div class="form-group col-sm-12 col-md-2 col-sm-offset-3" >                                                                               
                                                <p>Totale Fattura</p>
                                        </div>

                                        <div class="form-group col-sm-12 col-md-2 col-sm-offset-0">   
                                            <div class="f1-first-totaleFattura form-control"> 
                                                {{transient.nuovaFattura.totaleFattura  | currency: "€" : 2}}
                                                </div>
                                                </div>

                                        <div class="form-group col-sm-12 col-md-2 col-sm-offset-0">                                                                               
                                                <p>Totale Fattura Con Iva</p>
                                        </div>

                                        <div class="form-group col-sm-12 col-md-2 col-sm-offset-0">                                                                               
                                            <div class="f1-first-totaleFatturaIvato form-control"> 
                                                {{transient.nuovaFattura.totaleFatturaIvato  | currency: "€" : 2}}
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-3 text-left">
                                        <button class="btn btn-primary btn-md" ng-click="backStep1()"> <i class="fa fa-chevron-left"></i> INDIETRO</button>
                                    </div>
                                    <div ng-show="transient.nuovaFattura.righe.length > 0" class="col-sm-12 col-md-3 col-sm-offset-5 text-right">
                                        <button class="btn btn-primary btn-md" ng-click="nextStep1CheckArticoli()"> <i class="fa fa-chevron-right"></i> AVANTI</button>
                                    </div>
                                </div>      
                            </md-content>
                        </md-step>
                        <md-step label="{{temp.labelThirdStep}}" md-complete="temp.steppers.step2.completed"  ng-disabled="temp.steppers.step2.disabled">
                            <md-content style="background-color: transparent!important;">

                                <!-- Condizione per tipo fattura -->

                                <!-- tutte le fatture tranne DDT  -->
                                <div ng-if="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="portlet red-sunglo box">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-money"  style="font-size:19px"></i>Gestione Pagamenti </div>
                                      
                                    </div>
                                    <div class="portlet-body">
                                        <div class="table-responsive">
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th> Importo Rata: </th>
                                                        <th> Tipo Rata: </th>
                                                        <th> Scadenza Rata: </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="pagamento in transient.nuovaFattura.scadenza">

                                                        <td> <input input-label="valore" name="f1-first-importo-$index" 
                                                            required id="f1-first-importo-$index"
                                                            ng-model="transient.nuovaFattura.scadenza[$index].importo"
                                                            class="f1-first-importo-$index form-control" 
                                                            awnum="importoPositivo" type="text"> 
                                                        </td>
                                                        <td>  
                                                            <input type="text" name="f1-first-label-$index" 
                                                            required disabled id="f1-first-label-$index"
                                                            ng-model="transient.nuovaFattura.scadenza[$index].label"
                                                            class="f1-first-label-$index form-control" >
                                                        </td>
                                                        <td>  
                                                        <div class="input-group" locale="it" 
                                                              moment-picker="transient.nuovaFattura.scadenza[$index].scadenza"
                                                              format="DD/MM/YYYY" min-date="minDateScad" start-view="month">                                                            
                                                            <input type="text" input-label="scadenza" name="f1-first-scadenza-$index" 
                                                                required id="f1-first-scadenza-$index"
                                                                ng-model="transient.nuovaFattura.scadenza[$index].scadenza"
                                                                class="f1-first-scadenza-$index form-control" >
                                                                <span class="input-group-addon">
                                                                <i class="glyphicon glyphicon-calendar"></i>
                                                            </span>
                                                        </div>

                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                            <div class="col-md-12 value">      
                                                <span class="form-group col-sm-6 col-md-offset-0"><b>Totale gestito: </b> {{calcTotalOnReal() | currency: "€" : 2}} 
                                                </span>
                                                <span  class="form-group col-sm-6 col-md-offset-0"><b>Differenza: </b>{{transient.nuovaFattura.totaleFatturaIvato - calcTotalOnReal() | currency: "€" : 2}}
                                                </span>
                                           </div>

                                        </div>
                                    </div>
                                </div>


                                <!-- DDT e FACC -->

                                <div ng-if="transient.nuovaFattura.core.tipoFattura==='DDT' || transient.nuovaFattura.core.tipoFattura==='FACC'" class="portlet grey-cascade box">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-truck"  style="font-size:19px"></i>Gestione Trasporti </div>
                                        
                                    </div>
                                    <div class="portlet-body">
                                        <form role="form" name="formTransp" novalidate>
                                            
                                            <div class="row">
                                                <div class="form-group col-sm-12 col-md-7 col-md-offset-0" ng-class="{'has-error':!transient.nuovaFattura.core.trasportoACura && flagNext===false}">
                                                    <p>Trasporto a cura di:</p>                                                                                                         
                                                    <input type="text" name="nf-trasportoACura" 
                                                    required placeholder="trasporto a cura" 
                                                    id="nf-id-trasportoACura"
                                                    ng-model="transient.nuovaFattura.core.trasportoACura"
                                                    class="form-control">
                                                </div>
                                                <div class="form-group col-sm-12 col-md-1 col-md-offset-0" ng-class="{'has-error':(!transient.nuovaFattura.core.numColli || transient.nuovaFattura.core.numColli=='' || transient.nuovaFattura.core.numColli==undefined)  && (flagNext===false)}">
                                                    <p>Nr. Colli:</p>                                        
                                                    <input type="text" name="nf-colli" type="number" min="0" max="999999" blocco-max-value allow-only-numbers 
                                                    placeholder="colli" id="nf-id-colli"
                                                    ng-model="transient.nuovaFattura.core.numColli"
                                                    class="form-control" >
                                                </div>
            
                                                <div class="form-group col-sm-12 col-md-1 col-md-offset-0" ng-class="{'has-error':(!transient.nuovaFattura.core.pesoKg || transient.nuovaFattura.core.pesoKg=='' || transient.nuovaFattura.core.pesoKg==undefined) && (flagNext===false)}">
                                                    <p>Peso (Kg):</p>                                        
                                                    <input type="text" name="nf-peso" type="number" min="0" max="999999" blocco-max-value allow-only-numbers 
                                                    required placeholder="peso" id="nf-id-peso"
                                                    ng-model="transient.nuovaFattura.core.pesoKg"
                                                    class="form-control" >
                                                </div>
            
                                                <div class="form-group col-sm-12 col-md-3 col-md-offset-0" ng-class="{'has-error':!transient.nuovaFattura.core.conducente && flagNext===false}">
                                                    <p>Conducente:</p>
                                                    <input type="text" name="nf-conducente" 
                                                    required placeholder="conducente" id="nf-id-conducente" 
                                                    ng-model="transient.nuovaFattura.core.conducente" class="form-control">
                                                </div>   
                                            </div>
            
                                            <div class="row">
                                                <div class="form-group col-sm-12 col-md-offset-0">
                                                    <p>Note trasporto:</p>   
                                                    <textarea class="form-control"
                                                    ng-model="transient.nuovaFattura.core.noteTrasporto" id="nuovaFattura.core.noteTrasporto" 
                                                    rows="3"></textarea>                                                                                                     
                                                                                                                                                                                                
                                                </div>
                                            </div>

                                        </form>
                                        
                                    </div>
                                </div>

                                <!-- fine condizione per tipo fattura -->
                                <div class="row col-md-11">
                                    <div class="form-group col-sm-12 col-md-offset-0">
                                        <p>Note:</p>   
                                        <textarea class="form-control"
                                        ng-model="transient.nuovaFattura.core.note" id="nuovaFattura.core.note" 
                                        rows="3"></textarea>                                                                                                     
                                                                                                                                                                                    
                                    </div>
                                </div>
                                <div class="row col-md-11">
                                    <div class="form-group col-sm-12 col-md-10 col-md-offset-0">
                                        <p>allegato fattura:</p>   
                                        <div class="fileinput fileinput-new" data-provides="fileinput">
                                            <div class="input-group input-large">
                                                <div class="form-control uneditable-input input-fixed input-medium" data-trigger="fileinput">
                                                    <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                                    <span class="fileinput-filename"> </span>
                                                </div>
                                                <span class="input-group-addon btn default btn-file">
                                                    <span class="fileinput-new"> Seleziona file </span>
                                                    <span class="fileinput-exists"> Cambia </span>
                                                    <input type="file" id="uploadFileFattura" multiple ng-model="transient.nuovaFattura.allegati" base-sixty-four-input name="file" onloadstart="loadStart" onloadend="loadEnd" onerror="errorHandler"> </span>
                                                <a href="javascript:;" class="input-group-addon btn red fileinput-exists remove-attach" data-dismiss="fileinput"> Rimuovi </a>
                                            </div>
                                        </div>
                                        <label class="error-label red" ng-show="contract.file.$invalid">dimensioni file eccessive</label>                                                                                                  
                                                                                                                                                                                    
                                    </div>
                                </div>
                                
                                <div class="row col-md-12">

                                    <div class="col-sm-3 text-left">
                                        <button class="btn btn-primary btn-md" ng-click="backStep2()"> <i class="fa fa-chevron-left"></i> INDIETRO</button>
                                    </div>
                                    <div class="col-sm-3 col-sm-offset-6 text-right">
                                        <button class="btn btn-primary btn-md" ng-click="nextStep3SalvaFattura()"> <i class="fa fa-check"></i> CONFERMA</button>                                 
                                    </div>

                                </div>
                                
                            </md-content>
                        </md-step>
                        <md-step label="Riepilogo" md-complete="temp.steppers.step3.completed"  ng-disabled="temp.steppers.step3.disabled">
                            <md-content style="background-color: transparent!important;overflow-x: hidden;">  
                                

                            <div class="row">
                                <div class="col-md-12">
                                    <!-- Begin: life time stats -->
                                    <div class="portlet light portlet-fit portlet-datatable bordered" style="background-color: transparent!important;border: none !important;margin: -25px 0px;box-shadow: none;">
                                        <!--<div class="portlet-title">
                                            <div class="caption">
                                                <i class="icon-settings font-dark"></i>
                                                <span class="caption-subject font-dark sbold uppercase"> Fattura #{{transient.nuovaFattura.idFattura}}
                                                    <span class="hidden-xs">| {{transient.nuovaFattura.core.dataEmissione}} </span>
                                                </span>
                                            </div>
                                            
                                        </div>-->
                                            <div class="tabbable-line">
                                                <ul class="nav nav-tabs nav-tabs-lg">
                                                    
                                                </ul>
                                                <div class="tab-content" style="overflow-x: hidden;">
                                                    <div class="tab-pane active" id="tab_1">
                                                        <div class="row">
                                                            <div class="col-md-3 col-sm-12">
                                                                <div class="portlet yellow-crusta box">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-cogs"></i>Dettaglio Documento </div>
                                                                    </div>
                                                                    <div class="portlet-body">
                                                                        <div class="row static-info">
                                                                            <div class="col-md-5 name"> Documento #: </div>
                                                                            <div class="col-md-7 value"> 
                                                                                    {{transient.nuovaFattura.numeroFattura}}
                                                                                </div>
                                                                        </div>
                                                                        <div class="row static-info">
                                                                            <div class="col-md-5 name"> Data Doc.: </div>
                                                                            <div class="col-md-7 value"> {{transient.nuovaFattura.core.dataEmissione}} </div>
                                                                        </div>
                                                                        <div ng-show="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="row static-info">
                                                                            <div class="col-md-5 name"> Stato Doc.: </div>
                                                                            <div class="col-md-7 value">
                                                                                <span class="label label-success"> Da Pagare </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6 col-sm-12">
                                                                <div class="portlet blue-hoki box">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-cogs"></i>Dettaglio Cliente </div>
                                                                    </div>
                                                                    <div class="portlet-body">
                                                                        <div class="row static-info">
                                                                            <div class="col-md-4 name"> Ragione Sociale: </div>
                                                                            <div class="col-md-8 value"> {{clienteModel.NOME}} </div>
                                                                        </div>
                                                                        <div class="row static-info">
                                                                            <div class="col-md-4 name"> Telefono: </div>
                                                                            <div class="col-md-8 value"> {{clienteModel.TELEFONO}} </div>
                                                                        </div>
                                                                        <div class="row static-info">
                                                                            <div class="col-md-4 name"> Cod.Fiscale/Part. Iva: </div>
                                                                            <div class="col-md-8 value"> {{clienteModel.CODICE_FISCALE!==null && clienteModel.CODICE_FISCALE!==undefined && clienteModel.CODICE_FISCALE!==''?clienteModel.CODICE_FISCALE:'-'}} / {{clienteModel.PARTITA_IVA!==null && clienteModel.PARTITA_IVA!==undefined && clienteModel.PARTITA_IVA!==''?clienteModel.PARTITA_IVA:'-'}} </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-12">
                                                                <div class="portlet green-meadow box">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-cogs"></i>Indirizzi Cliente </div>
                                                                    </div>
                                                                    <div class="portlet-body">
                                                                        <div class="row static-info">
                                                                            <div class="col-md-4 name"> Città: </div>
                                                                            <div class="col-md-8 value"> {{clienteModel.CITTA}} ({{clienteModel.PROVINCIA}}) </div>
                                                                        </div>
                                                                        <div class="row static-info">
                                                                            <div class="col-md-4 name"> Indirizzo: </div>
                                                                            <div class="col-md-8 value"> {{clienteModel.INDIRIZZO}} </div>
                                                                        </div>
                                                                        <div class="row static-info">
                                                                            <div class="col-md-4 name"> Cap: </div>
                                                                            <div class="col-md-8 value"> {{clienteModel.CAP}} </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="portlet grey-cascade box">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-cogs"></i>Dettaglio articoli </div>
                                                                    </div>
                                                                    <div class="portlet-body">
                                                                        <div class="table-responsive">
                                                                            <table class="table table-hover table-bordered table-striped">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th> Codice </th>
                                                                                        <th> Descrizione </th>
                                                                                        <th> Prezzo </th>
                                                                                        <th> Totale </th>
                                                                                        <th> Totale con Iva </th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr ng-repeat="articolo in transient.nuovaFattura.righe">
                                                                                    <td>{{articolo.codiceArticolo}}</td>
                                                                                    <td>{{articolo.descrizione}}</td>
                                                                                    <td>{{articolo.prezzoUnitario | currency: "€" : 2}} </td>
                                                                                    <td> {{articolo.totaleRiga | currency: "€" : 2}} </td>
                                                                                    <td> {{articolo.totaleRigaIvato | currency: "€" : 2}} </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div ng-if="transient.nuovaFattura.core.tipoFattura==='DDT' || transient.nuovaFattura.core.tipoFattura==='FACC'" class="row">
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="portlet grey-cascade box">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-cogs"></i>Condizioni trasporto </div>
                                                                    </div>
                                                                    <div class="portlet-body">
                                                                        <div class="row static-info">
                                                                            <div class="col-md-2 name"> Trasporto a cura: </div>
                                                                            <div class="col-md-4 value"> {{transient.nuovaFattura.core.trasportoACura}} </div>
                                                                            <div class="col-md-1 name"> Nr. Colli: </div>
                                                                            <div class="col-md-2 value"> {{transient.nuovaFattura.core.numColli}} </div>
                                                                            <div class="col-md-1 name"> Peso: </div>
                                                                            <div class="col-md-2 value"> {{transient.nuovaFattura.core.pesoKg}} </div>
                                                                        </div>
                                                                        <div class="row static-info">
                                                                            <div class="col-md-2 name"> Conducente: </div>
                                                                            <div class="col-md-4 value"> {{transient.nuovaFattura.core.conducente}} </div>
                                                                            <div class="col-md-1 name"> Note trasp: </div>
                                                                            <div class="col-md-5 value"> {{transient.nuovaFattura.core.noteTrasporto}} </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>                                                                 
                                                        </div>

                                                        <div class="row">
                                                                <div class="col-md-6 col-sm-12">
                                                                    <div ng-show="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="portlet red-sunglo box">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-cogs"></i>Pagamenti </div>
                                                                        </div>
                                                                        <div class="portlet-body">
                                                                            <div class="row static-info">
                                                                                <div class="col-md-12 value" ng-repeat="pagamento in transient.nuovaFattura.scadenza">      
                                                                                    <span class="form-group col-sm-6 col-md-offset-0">Scadenza: {{pagamento.scadenza | date : 'dd/MM/yyyy'}} 
                                                                                    </span>
                                                                                    <span  class="form-group col-sm-6 col-md-offset-0">Rata: {{pagamento.importo | currency: "€" : 2}}
                                                                                    </span>
                                                                               </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                 <div class="col-md-6 col-sm-12">
                                                                    <div class="portlet grey-cascade box">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-cogs"></i>Totali </div>
                                                                        </div>
                                                                        <div class="portlet-body">
                                                                            <div class="row static-info">
                                                                                <div class="col-md-12 value">      
                                                                                    <span class="form-group col-sm-6 col-md-offset-0">Totale: {{transient.nuovaFattura.totaleFattura | currency: "€" : 2}} 
                                                                                    </span>
                                                                                    <span  class="form-group col-sm-6 col-md-offset-0">Totale Ivato: {{transient.nuovaFattura.totaleFatturaIvato | currency: "€" : 2}}
                                                                                    </span>
                                                                               </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                 
                                                            </div>

                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        
                                    </div>
                                    <!-- End: life time stats -->
                                </div>
                            </div>

                            <br><br>
                            <div class="row">
                                    <div class="col-xs-12 text-center">
                                        <button class="btn btn-primary btn-md" ng-click="gotoElencoFatture()">
                                            Torna a Documenti
                                        </button>
                                        <button ng-show="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF' && transient.nuovaFattura.core.tipoFattura!=='FACC'" class="btn green-meadow btn-md" ng-click="generaDdt(transient.nuovaFattura.idFattura)"> <i class="fa fa-eur"></i>
                                            Genera ddt
                                        </button>
                                        <button ng-show="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="btn green-meadow btn-md" ng-click="openModalGeneraNDCR(transient.nuovaFattura.idFattura)"> <i class="fa fa-eur"></i>
                                            Genera ndc
                                        </button>
                                        <button ng-show="transient.nuovaFattura.core.tipoFattura!=='DDT' && transient.nuovaFattura.core.tipoFattura!=='PROF'" class="btn green-meadow btn-md" ng-click="openModalPagamentoFatture(transient.nuovaFattura.idFattura)"> <i class="fa fa-eur"></i>
                                            Paga
                                        </button>
                                        <button class="btn green-meadow btn-md" ng-click="gotoNuovaFattura()"> <i class="fa fa-eur"></i>
                                            Nuova
                                        </button>
                                        <button class="btn dark btn-outline btn-md" ng-click="creaPdfFattura(transient.nuovaFattura.idFattura,transient.nuovaFattura.core.tipoFattura)"> <i class="fa fa-print"></i>
                                            Stampa
                                        </button>
                                    </div>
                                </div>
                        </md-step>
                    </md-steppers>       
                </div>      
            </div>
</div>
